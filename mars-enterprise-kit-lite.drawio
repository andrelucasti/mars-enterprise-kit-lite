<mxfile host="Electron" version="29.3.6" pages="1">
  <diagram id="arch-v2" name="Architecture">
    <mxGraphModel dx="1422" dy="850" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="980" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Outer container -->
        <mxCell id="outer" value="mars-enterprise-kit-lite" parent="1"
          style="rounded=1;whiteSpace=wrap;fillColor=#f5f5f5;strokeColor=#999999;fontStyle=1;fontSize=15;fontColor=#333333;verticalAlign=top;"
          vertex="1">
          <mxGeometry x="10" y="10" width="1180" height="950" as="geometry"/>
        </mxCell>

        <!-- ======= api/ LAYER ======= -->
        <mxCell id="api" value="api/ (HTTP Layer — port 8082)" parent="1"
          style="swimlane;startSize=30;fillColor=#dae8fc;strokeColor=#6c8ebf;fontStyle=1;fontSize=12;fontColor=#333333;rounded=1;"
          vertex="1">
          <mxGeometry x="30" y="55" width="1140" height="228" as="geometry"/>
        </mxCell>

        <!-- api/ Row 1: main classes -->
        <mxCell id="api-ctrl" value="OrderController" parent="api"
          style="rounded=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;"
          vertex="1">
          <mxGeometry x="15" y="43" width="138" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="api-req" value="CreateOrderRequest" parent="api"
          style="rounded=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;"
          vertex="1">
          <mxGeometry x="168" y="43" width="148" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="api-resp" value="OrderResponse" parent="api"
          style="rounded=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;"
          vertex="1">
          <mxGeometry x="331" y="43" width="128" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="api-geh" value="GlobalExceptionHandler" parent="api"
          style="rounded=1;whiteSpace=wrap;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=11;"
          vertex="1">
          <mxGeometry x="474" y="43" width="168" height="32" as="geometry"/>
        </mxCell>

        <!-- chaos/ subsection (dashed container inside api/) -->
        <mxCell id="chaos-bg" value="chaos/ (@Profile(&quot;chaos&quot;))" parent="api"
          style="rounded=1;fillColor=none;strokeColor=#b85450;dashed=1;strokeWidth=2;fontStyle=3;fontSize=10;fontColor=#b85450;verticalAlign=top;align=left;spacingLeft=6;"
          vertex="1">
          <mxGeometry x="15" y="90" width="850" height="118" as="geometry"/>
        </mxCell>
        <mxCell id="chaos-ctrl" value="ChaosController" parent="chaos-bg"
          style="rounded=1;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontColor=#b85450;"
          vertex="1">
          <mxGeometry x="10" y="38" width="140" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="chaos-svc" value="ChaosService" parent="chaos-bg"
          style="rounded=1;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontColor=#b85450;"
          vertex="1">
          <mxGeometry x="165" y="38" width="128" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="chaos-exec" value="ChaosOrderExecutor" parent="chaos-bg"
          style="rounded=1;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontColor=#b85450;"
          vertex="1">
          <mxGeometry x="308" y="38" width="158" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="chaos-aspect" value="PhantomEventChaosAspect" parent="chaos-bg"
          style="rounded=1;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontColor=#b85450;"
          vertex="1">
          <mxGeometry x="481" y="38" width="188" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="chaos-exc" value="PhantomEventSimulationException" parent="chaos-bg"
          style="rounded=1;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontColor=#b85450;"
          vertex="1">
          <mxGeometry x="684" y="38" width="155" height="32" as="geometry"/>
        </mxCell>

        <!-- depends on arrow 1 -->
        <mxCell id="arr1" parent="1" source="api" target="infra"
          style="edgeStyle=orthogonalEdgeStyle;dashed=1;strokeColor=#999999;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
          edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="arr1-label" value="depends on" parent="1"
          style="text;html=1;align=center;fontSize=10;fontColor=#999999;fontStyle=2;"
          vertex="1">
          <mxGeometry x="540" y="288" width="80" height="16" as="geometry"/>
        </mxCell>

        <!-- ======= infrastructure/ LAYER ======= -->
        <mxCell id="infra" value="infrastructure/ (Adapters)" parent="1"
          style="swimlane;startSize=30;fillColor=#d5e8d4;strokeColor=#82b366;fontStyle=1;fontSize=12;fontColor=#333333;rounded=1;"
          vertex="1">
          <mxGeometry x="30" y="310" width="1140" height="225" as="geometry"/>
        </mxCell>

        <!-- persistence/ -->
        <mxCell id="persist-lbl" value="persistence/" parent="infra"
          style="text;html=1;fontSize=9;fontColor=#82b366;fontStyle=3;align=left;"
          vertex="1">
          <mxGeometry x="15" y="36" width="85" height="16" as="geometry"/>
        </mxCell>
        <mxCell id="infra-ri" value="OrderRepositoryImpl" parent="infra"
          style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;"
          vertex="1">
          <mxGeometry x="15" y="52" width="152" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="infra-oe" value="OrderEntity" parent="infra"
          style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;"
          vertex="1">
          <mxGeometry x="182" y="52" width="110" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="infra-oie" value="OrderItemEntity" parent="infra"
          style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;"
          vertex="1">
          <mxGeometry x="307" y="52" width="130" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="infra-jpa" value="OrderJpaRepository" parent="infra"
          style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;"
          vertex="1">
          <mxGeometry x="452" y="52" width="148" height="32" as="geometry"/>
        </mxCell>

        <!-- messaging/ -->
        <mxCell id="msg-lbl" value="messaging/" parent="infra"
          style="text;html=1;fontSize=9;fontColor=#82b366;fontStyle=3;align=left;"
          vertex="1">
          <mxGeometry x="15" y="100" width="80" height="16" as="geometry"/>
        </mxCell>
        <mxCell id="infra-pub" value="OrderCreatedPublisher" parent="infra"
          style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;"
          vertex="1">
          <mxGeometry x="15" y="116" width="158" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="infra-con" value="OrderCancelledConsumer" parent="infra"
          style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;"
          vertex="1">
          <mxGeometry x="188" y="116" width="162" height="32" as="geometry"/>
        </mxCell>

        <!-- configuration/ -->
        <mxCell id="conf-lbl" value="configuration/" parent="infra"
          style="text;html=1;fontSize=9;fontColor=#82b366;fontStyle=3;align=left;"
          vertex="1">
          <mxGeometry x="460" y="100" width="100" height="16" as="geometry"/>
        </mxCell>
        <mxCell id="infra-kc" value="KafkaConfiguration" parent="infra"
          style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;"
          vertex="1">
          <mxGeometry x="460" y="116" width="148" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="infra-ac" value="AuditingConfiguration" parent="infra"
          style="rounded=1;whiteSpace=wrap;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;"
          vertex="1">
          <mxGeometry x="623" y="116" width="158" height="32" as="geometry"/>
        </mxCell>

        <!-- depends on arrow 2 -->
        <mxCell id="arr2" parent="1" source="infra" target="domain"
          style="edgeStyle=orthogonalEdgeStyle;dashed=1;strokeColor=#999999;exitX=0.5;exitY=1;entryX=0.5;entryY=0;"
          edge="1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="arr2-label" value="depends on" parent="1"
          style="text;html=1;align=center;fontSize=10;fontColor=#999999;fontStyle=2;"
          vertex="1">
          <mxGeometry x="540" y="542" width="80" height="16" as="geometry"/>
        </mxCell>

        <!-- ======= domain/ LAYER ======= -->
        <mxCell id="domain" value="domain/ (Zero Framework Dependencies — @Service + @Transactional only)" parent="1"
          style="swimlane;startSize=30;fillColor=#fff2cc;strokeColor=#d6b656;fontStyle=1;fontSize=12;fontColor=#333333;rounded=1;"
          vertex="1">
          <mxGeometry x="30" y="560" width="1140" height="228" as="geometry"/>
        </mxCell>

        <!-- domain objects row -->
        <mxCell id="dom-obj-lbl" value="domain objects" parent="domain"
          style="text;html=1;fontSize=9;fontColor=#d6b656;fontStyle=3;align=left;"
          vertex="1">
          <mxGeometry x="15" y="36" width="100" height="16" as="geometry"/>
        </mxCell>
        <mxCell id="dom-order" value="Order" parent="domain"
          style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;"
          vertex="1">
          <mxGeometry x="15" y="52" width="88" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="dom-item" value="OrderItem" parent="domain"
          style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;"
          vertex="1">
          <mxGeometry x="118" y="52" width="100" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="dom-status" value="OrderStatus" parent="domain"
          style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;"
          vertex="1">
          <mxGeometry x="233" y="52" width="108" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="dom-event" value="OrderCreatedEvent" parent="domain"
          style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;"
          vertex="1">
          <mxGeometry x="356" y="52" width="148" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="dom-result" value="DomainResult" parent="domain"
          style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;"
          vertex="1">
          <mxGeometry x="519" y="52" width="115" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="dom-bex" value="BusinessException" parent="domain"
          style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;"
          vertex="1">
          <mxGeometry x="649" y="52" width="148" height="32" as="geometry"/>
        </mxCell>

        <!-- ports (interfaces) row -->
        <mxCell id="port-lbl" value="ports (interfaces)" parent="domain"
          style="text;html=1;fontSize=9;fontColor=#d6b656;fontStyle=3;align=left;"
          vertex="1">
          <mxGeometry x="15" y="100" width="120" height="16" as="geometry"/>
        </mxCell>
        <mxCell id="dom-repo-port" value="OrderRepository" parent="domain"
          style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=2;"
          vertex="1">
          <mxGeometry x="15" y="116" width="148" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="dom-ep-port" value="OrderEventPublisher" parent="domain"
          style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=2;"
          vertex="1">
          <mxGeometry x="178" y="116" width="160" height="32" as="geometry"/>
        </mxCell>

        <!-- usecase/ -->
        <mxCell id="uc-lbl" value="usecase/" parent="domain"
          style="text;html=1;fontSize=9;fontColor=#d6b656;fontStyle=3;align=left;"
          vertex="1">
          <mxGeometry x="430" y="100" width="70" height="16" as="geometry"/>
        </mxCell>
        <mxCell id="dom-couc" value="CreateOrderUseCase (@Service)" parent="domain"
          style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;"
          vertex="1">
          <mxGeometry x="430" y="116" width="210" height="32" as="geometry"/>
        </mxCell>
        <mxCell id="dom-cuc" value="CancelOrderUseCase (@Service)" parent="domain"
          style="rounded=1;whiteSpace=wrap;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;"
          vertex="1">
          <mxGeometry x="655" y="116" width="210" height="32" as="geometry"/>
        </mxCell>

        <!-- ======= EXTERNAL SYSTEMS ======= -->
        <mxCell id="pg-ext" value="&lt;b&gt;PostgreSQL 16-alpine&lt;/b&gt;&lt;br/&gt;Port: 5432" parent="1"
          style="rounded=1;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontColor=#b85450;align=center;"
          vertex="1">
          <mxGeometry x="30" y="832" width="240" height="68" as="geometry"/>
        </mxCell>
        <mxCell id="rp-ext" value="&lt;b&gt;Redpanda (Kafka-compatible)&lt;/b&gt;&lt;br/&gt;Kafka: 9092 | Admin: 9644 | Schema Registry: 8081" parent="1"
          style="rounded=1;whiteSpace=wrap;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontColor=#b85450;align=center;"
          vertex="1">
          <mxGeometry x="480" y="832" width="450" height="68" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
